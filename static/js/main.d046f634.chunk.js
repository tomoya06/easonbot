(this["webpackJsonpreact-sqljs-demo"]=this["webpackJsonpreact-sqljs-demo"]||[]).push([[0],{122:function(e,t,n){},128:function(e,t){},130:function(e,t){},141:function(e,t){},143:function(e,t){},170:function(e,t){},172:function(e,t){},173:function(e,t){},178:function(e,t){},180:function(e,t){},186:function(e,t){},188:function(e,t){},207:function(e,t){},219:function(e,t){},222:function(e,t){},225:function(e,t,n){},227:function(e,t,n){},228:function(e,t,n){"use strict";n.r(t);var c=n(3),r=n.n(c),a=n(113),i=n.n(a),o=n(114),s=n(7),u=n(58),l=n.n(u),j=(n(122),n(115)),b=n.n(j),m=(n(225),n(1));function f(e){var t=e.db,n=e.switchDebug,r=Object(c.useState)(null),a=Object(s.a)(r,2),i=a[0],o=a[1],u=Object(c.useState)([]),l=Object(s.a)(u,2),j=l[0],b=l[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{onClick:function(){return n()},children:"React SQL interpreter"}),Object(m.jsx)("textarea",{onChange:function(e){return function(e){try{b(t.exec(e)),o(null)}catch(n){o(n),b([])}}(e.target.value)},placeholder:"Enter some SQL. No inspiration ? Try \u201cselect sqlite_version()\u201d"}),Object(m.jsx)("pre",{className:"error",children:(i||"").toString()}),Object(m.jsx)("pre",{children:j.map((function(e,t){var n=e.columns,c=e.values;return Object(m.jsx)(d,{columns:n,values:c},t)}))})]})}function d(e){var t=e.columns,n=e.values;return Object(m.jsxs)("table",{className:"debugtable",children:[Object(m.jsx)("thead",{children:Object(m.jsx)("tr",{children:t.map((function(e,t){return Object(m.jsx)("td",{children:e},t)}))})}),Object(m.jsx)("tbody",{children:n.map((function(e,t){return Object(m.jsx)("tr",{children:e.map((function(e,t){return Object(m.jsx)("td",{children:e},t)}))},t)}))})]})}n(227);function O(e){var t=e.lyric,n=e.song_name,c=(e.album_name,e.year),r="".concat(t," \u2014\u2014\u300a").concat(n,"\u300b, ").concat(c);navigator.clipboard.writeText(r),function(e){var t=document.createElement("div");t.className="toast";var n=document.createTextNode(e);t.appendChild(n),document.body.appendChild(t),setTimeout((function(){t.parentElement.removeChild(t)}),2e3)}("\u6b4c\u8bcd\u5df2\u590d\u5236\uff1a".concat(r))}function h(e){var t=e.item,n=t.lyric,c=t.song_name,r=(t.album_name,t.year);return Object(m.jsxs)("div",{className:"lyricRow",onClick:function(){return O(t)},children:[Object(m.jsx)("strong",{className:"lyric",children:n}),Object(m.jsxs)("div",{className:"comment",children:["\u300a",c,"\u300b, ",r]})]})}var g="\u9648\u5955\u8fc5\u66fe\u7ecf\u5531\u8fc7",p="".concat(g,"...");function x(e){var t=e.db,n=e.switchDebug,r=Object(c.useState)(null),a=Object(s.a)(r,2),i=(a[0],a[1]),o=Object(c.useState)([]),u=Object(s.a)(o,2),l=u[0],j=u[1],b=Object(c.useState)(""),f=Object(s.a)(b,2),d=f[0],O=f[1],x=Object(c.useState)(2),v=Object(s.a)(x,2),y=v[0],w=v[1];var S=Object(c.useMemo)((function(){return d?l.length>0?1:-1:0}),[d,l]),_=Object(c.useMemo)((function(){switch(S){case 0:return"";case 1:return"\u9648\u5955\u8fc5\u66fe\u7ecf\u5531\u8fc7 ".concat(l.length," \u53e5\u300c").concat(d,"\u300d");case-1:return"\u9648\u5955\u8fc5\u4ece\u6765\u6ca1\u5531\u8fc7".concat(d,"...")}}),[S,d,l]),N=Object(c.useMemo)((function(){return"".concat(g).concat(".".repeat(y+1))}),[y]),k=Object(c.useMemo)((function(){switch(S){case 0:return"./img/waiting.jpg";case 1:return"./img/cool.jpg";case-1:return"./img/nonono.jpg"}}),[S]);return Object(c.useEffect)((function(){document.title=_||p}),[_]),Object(c.useEffect)((function(){var e=setTimeout((function(){w((y+1)%3)}),1e3);return function(){clearTimeout(e)}}),[y]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("article",{className:"inputContainer "+(1===S?"topContainer":""),children:[Object(m.jsx)("img",{src:k,className:"easonAvatar"}),Object(m.jsx)("input",{placeholder:N,onChange:function(e){return function(e){if(O(e),e)if("debugdebug"!==e){var c=function(e){return"\n  select lyrics.lyric, songs.song_name, albums.album_name, albums.year from lyrics \n  inner join songs on lyrics.song_id = songs.song_id \n  inner join albums on albums.album_id = songs.album_id\n  where lyrics.lyric like '%".concat(e,"%' group by lyrics.lyric, songs.song_name")}(e);try{var r=Date.now(),a=t.exec(c);console.log("sql exec time: ".concat(Date.now()-r,"ms"));var o=function(e){try{var t=e[0],n=t.columns;return t.values.map((function(e){var t={};return n.forEach((function(n,c){t[n]=e[c]})),t}))}catch(c){return[]}}(a);j(o),i(null)}catch(s){i(s),j([])}}else n();else j([])}(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&e.target.blur()}})]}),Object(m.jsx)("header",{children:_}),Object(m.jsx)("article",{children:l.map((function(e){return Object(m.jsx)(h,{item:e},JSON.stringify(e))}))}),Object(m.jsxs)("footer",{children:["\u6b4c\u8bcd\u6570\u636e\u6765\u6e90 ",Object(m.jsx)("a",{href:"https://mojim.com/",target:"_blank",children:"mojim.com"})," | \u7ed3\u679c\u4e4b\u51c6\u786e\u6027\u4e0d\u5f52\u672c\u7ad9\u7ba1",Object(m.jsx)("br",{}),Object(m.jsx)("a",{href:"https://github.com/tomoya06",children:"github@tomoya06"})," \xa9 2022"]})]})}var v=n(116);function y(){var e=Object(c.useState)(null),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),i=Object(s.a)(a,2),u=i[0],j=i[1],d=Object(c.useState)(null),O=Object(s.a)(d,2),h=O[0],g=O[1];function p(){j(!u)}return Object(c.useEffect)(Object(o.a)(l.a.mark((function e(){var t,n,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([fetch("./database.db").then((function(e){return e.arrayBuffer()})),b()({locateFile:function(){return v.a}})]);case 3:t=e.sent,n=Object(s.a)(t,2),c=n[0],a=n[1],r(new a.Database(new Uint8Array(c))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),g(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[]),h?Object(m.jsx)("pre",{children:h.toString()}):n?Object(m.jsx)("div",{className:"App",children:u?Object(m.jsx)(f,{db:n,switchDebug:p}):Object(m.jsx)(x,{db:n,switchDebug:p})}):Object(m.jsx)("pre",{children:"Loading..."})}var w=document.getElementById("root");i.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(y,{})}),w)}},[[228,1,2]]]);
//# sourceMappingURL=main.d046f634.chunk.js.map